<polymer-element name="ano-novo" attributes="turn">
	<template>
		<div id='container'>
  			<div class='date'>
    			20
    			<div class='wine'></div>
    			4
  			</div>
  			<p class="text">Have a happy 2014, and <a id="link" href="#" title="on / off"> click here</a>.</p>
		</div>
		<style>
		body {
		  background-color: #3eb3c4;
		  color:white;
		  font-family: 'Concert One', cursive;
		  font-size: 300pt;
		}
		#container {
		  width:780px;
		  margin: 0 auto;
		}
		.text {
			position: relative;
			width: 28em;
			text-align: center;
			top: 25em;
			margin: 0 -4em;
			font-size: 18px;
			line-height: 1em;
			color: #555;
			font-family: arial;
		}
		.text a {color: #e67e22;}
		.date {
		  margin:0 100px;
		}

		.date {
		  margin:0 0 0;
		  width: 780px;
		}
		.wine {
		   display:inline-block;
		    margin-left:-145px;
		  margin-top:45px;
		   position:absolute;
		   width:126px;
		   height:210px;
		   background-color:white;
		   -webkit-border-radius: 73px 73px 83px 83px / 210px 210px 108px 108px;
		    background: -webkit-gradient(linear, center top, center bottom,  color-stop(0%,rgba(255,255,255,0)), color-stop(5%,rgba(255,255,255,0)),color-stop(5%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,1)));

		}
		.wine::before {
		  position:relative;
		  top:100%;
		  left:58px;
		  display:block;
		  content:'';
		  height:150px;
		  width: 10px;
		  background-color:white;
		}
		.wine::after {
		  position:relative;
		  top:100%;
		  left:0px;
		  display:block;
		  content:'';
		  height:10px;
		  width:126px;
		  border-radius: 190px 190px 0 0;
		  -moz-border-radius: 190px 190px 0 0;
		  -webkit-border-radius: 400px 400px 0 0;
		  background:white;
		}
		.on .balls {
			animation: xmas 1s steps(1) infinite;
            -webkit-animation: xmas 1s steps(1) infinite;
		}
		@keyframes xmas {
			0%, 100% {
				background-position: 22em 4em, 8em 6em, 16em 12em, 26em 15em, 10em 15em, 4em 18em, 20em 20em;
			}
			20%, 80% {
				background-position: 4em 18em, 20em 20em, 22em 4em, 8em 6em, 16em 12em, 26em 15em, 10em 15em;
			}
			40% {
				background-position:  10em 15em, 4em 18em, 22em 4em, 8em 6em, 26em 15em, 20em 20em, 16em 12em;
			}
			60% {
				background-position: 26em 15em, 10em 15em, 8em 6em, 16em 12em, 22em 4em, 4em 18em, 20em 20em;
			}
		}
		@-webkit-keyframes xmas {
			0%, 100% {
				background-position: 22em 4em, 8em 6em, 16em 12em, 26em 15em, 10em 15em, 4em 18em, 20em 20em;
			}
			20%, 80% {
				background-position: 4em 18em, 20em 20em, 22em 4em, 8em 6em, 16em 12em, 26em 15em, 10em 15em;
			}
			40% {
				background-position:  10em 15em, 4em 18em, 22em 4em, 8em 6em, 26em 15em, 20em 20em, 16em 12em;
			}
			60% {
				background-position: 26em 15em, 10em 15em, 8em 6em, 16em 12em, 22em 4em, 4em 18em, 20em 20em;
			}
		}
		</style>
	</template>
	<script>
	Polymer('ano-novo', {
		created: function() {
			var that = this;

			window.addEventListener('devicelight', function(event) {
				if (event.value <= 10) {
					that.setAttribute('turn', 'on');
				}
				else {
					that.setAttribute('turn', 'off');
				}
			});

			that.$.link.addEventListener('click', function(event) {
				event.preventDefault();

				var turn = that.getAttribute('turn');

				if (turn == 'on') {
					that.setAttribute('turn', 'off');
				}
				else {
					that.setAttribute('turn', 'on');
				}
			});
		},

		turnChanged: function(oldVal) {
			var turn = this.getAttribute('turn');

			if (turn == 'on') {
				this.$.container.classList.add('on');
				document.getElementById('audio').play();
			}
			else {
				this.$.container.classList.remove('on');
				document.getElementById('audio').pause();
			}
		}
	});
	</script>
</polymer-element>